<div class="pre-inscription-container">
  <div class="header-section">
    <h5 nz-typography class="section-title mb-3">PRE INSCRIPCIONES DE ESTUDIANTES</h5>
  </div>
  
  <nz-table
    #groupingTable
    [nzData]="preRegistrations"
    [nzScroll]="{ x: '1150px', y: '440px' }"
    nzSize="small"
    nzBordered
    class="custom-table hugging-table student-table"
  >
    <thead>
      <tr class="header-row">
        <th rowspan="2" class="header-cell student-section">N°</th>
        <th colspan="7" class="header-cell student-section">Datos del Estudiante</th>
        <th colspan="4" class="header-cell student-section">Datos del Apoderado</th>
        <th rowspan="2" class="header-cell student-section">Acciones</th>
      </tr>
      <tr class="subheader-row">
        <th class="subheader-cell">Código RUDE</th>
        <th class="subheader-cell">Carnet Identidad</th>
        <th class="subheader-cell">Ap. Paterno</th>
        <th class="subheader-cell">Ap. Materno</th>
        <th class="subheader-cell">Nombres</th>
        <th class="subheader-cell">Género</th>
        <th class="subheader-cell">Nivel</th>
        <th class="subheader-cell">Año escolaridad</th>
        <th class="subheader-cell">Fecha registro</th>
        <th class="subheader-cell">Estado</th>
        <th class="subheader-cell" nzWidth="90px">Ver Apoderado</th>
      </tr>
    </thead>
    <tbody>
      @for(data of groupingTable.data; track data; let i = $index) {
        <tr class="data-row">
          <td class="data-cell number-cell">{{ i+1 }}</td>
          <td class="data-cell">{{ data.postulant.codeRude ?? 'NUEVO' }}</td>
          <td class="data-cell">{{ data.postulant.identityCard ?? 'SIN CARNET'}}</td>
          <td class="data-cell">{{ data.postulant.lastName }}</td>
          <td class="data-cell">{{ data.postulant.mothersLastName }}</td>
          <td class="data-cell">{{ data.postulant.name }}</td>
          <td class="data-cell"><nz-tag [nzColor]="data.postulant.gender === 'M' ? 'blue' : 'pink'">{{ data.postulant.gender }}</nz-tag></td>
          <td class="data-cell">{{ data.highDemandCourse.level.name }}</td>
          <td class="data-cell">{{ data.highDemandCourse.grade.name }}</td>
          <td class="data-cell">{{ data.createdAt }}</td>
          <td class="data-cell">{{ data.state }}</td>
          <td [(nzExpand)]="data.expand" nzWidth="90px"></td>
          <td class="data-cell actions-cell">
            <div class="action-buttons">
              <!-- <button nz-button nzType="text" nzSize="small" nzShape="circle" class="action-button" nz-tooltip nzTooltipTitle="Aprobar">
                <span nz-icon nzType="check-circle" nzTheme="outline" style="color: #52c41a;"></span>
              </button>
              <button nz-button nzType="text" nzSize="small" nzShape="circle" class="action-button" nz-tooltip nzTooltipTitle="Rechazar">
                <span nz-icon nzType="close-circle" nzTheme="outline" style="color: #f5222d;"></span>
              </button> -->
              <button nz-button nzType="text" nzSize="small" nzShape="circle" class="action-button" nz-tooltip nzTooltipTitle="Generar PDF">
                <span nz-icon nzType="file-pdf" nzTheme="outline" style="color: #0D9488;"></span>
              </button>
            </div>
          </td>
        </tr>
        <tr [nzExpand]="data.expand" >
          <!-- <nz-table #innerTable [nzData]="listofChildrenData" nzSize="small" [nzShowPagination]="false">
            <thead>
              <tr>
                <th>Carnet Identidad</th>
                <th>Ap. Paterno</th>
                <th>Ap. Materno</th>
                <th>Nombres</th>
                <th>Parentesco</th>
              </tr>
            </thead>
            <tbody>
              @for(data of innerTable.data; track data) {
                <tr>
                  <td>{{ data.identity_card_tutor }}</td>
                  <td>{{ data.last_name_tutor }}</td>
                  <td>{{ data.mothers_last_name_tutor }}</td>
                  <td>{{ data.full_name_tutor }}</td>
                  <td>{{ data.relationship}} </td>
                </tr>
              }
            </tbody>
          </nz-table> -->
        </tr>
      }
    </tbody>
  </nz-table>
</div>